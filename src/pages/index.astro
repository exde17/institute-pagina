---
import Layout from '../layouts/Layout.astro';
---
<Layout title="Instituto Fundaci√≥n ‚Äî Educaci√≥n y Desarrollo">
  <!-- H√©roe mejorado -->
  <section class="relative overflow-hidden">
    <img src="/hero.png" alt="" class="absolute inset-0 h-full w-full object-cover opacity-20" />
    
    <!-- Gradiente overlay -->
    <div class="absolute inset-0 bg-gradient-to-br from-blue-50/80 via-white/70 to-purple-50/80"></div>
    
    <!-- C√≠rculos decorativos animados -->
    <div class="absolute top-20 right-20 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"></div>
    <div class="absolute top-40 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"></div>
    <div class="absolute -bottom-8 left-1/2 w-72 h-72 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"></div>
    
    <div class="relative mx-auto max-w-6xl px-4 py-24 md:py-32">
      <div class="max-w-3xl mx-auto text-center">
        <div class="inline-block animate-fade-in-up">
          <span class="inline-flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold mb-6">
            <span class="animate-pulse">üåü</span>
            Transformando vidas desde 2020
          </span>
        </div>
        
        <h1 class="text-4xl md:text-6xl font-extrabold leading-tight bg-gradient-to-r from-blue-900 via-blue-700 to-purple-700 bg-clip-text text-transparent animate-fade-in-up animation-delay-200">
          Educaci√≥n y desarrollo para transformar comunidades
        </h1>
        
        <p class="mt-6 text-lg md:text-xl text-slate-700 max-w-2xl mx-auto leading-relaxed animate-fade-in-up animation-delay-400">
          Acompa√±amos procesos de formaci√≥n, empleo y acci√≥n social. Juntos construimos oportunidades reales de progreso.
        </p>
        
        <div class="mt-8 flex flex-wrap gap-4 justify-center animate-fade-in-up animation-delay-600">
          <a href="/programas" class="group bg-gradient-to-r from-blue-800 to-blue-600 text-white px-7 py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2">
            Conoce nuestros programas
            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
            </svg>
          </a>
          <a href="/donar" class="group bg-gradient-to-r from-amber-400 to-orange-400 text-black px-7 py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2">
            üíõ Quiero donar
            <svg class="w-5 h-5 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
            </svg>
          </a>
        </div>

        <!-- Estad√≠sticas r√°pidas -->
        <div class="mt-12 grid grid-cols-3 gap-6 animate-fade-in-up animation-delay-800">
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-blue-800 counter" data-target="500">0</div>
            <div class="text-sm text-slate-600 mt-1">Estudiantes becados</div>
          </div>
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-purple-800 counter" data-target="120">0</div>
            <div class="text-sm text-slate-600 mt-1">Familias beneficiadas</div>
          </div>
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-pink-800 counter" data-target="15">0</div>
            <div class="text-sm text-slate-600 mt-1">Programas activos</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Tarjetas de programas mejoradas -->
  <section class="mx-auto max-w-6xl px-6 md:px-8 lg:px-4 py-16">
    <div class="text-center mb-12">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-800 to-purple-700 bg-clip-text text-transparent">
        Nuestros programas
      </h2>
      <p class="mt-3 text-sm sm:text-base text-slate-600 max-w-2xl mx-auto px-4">
        Descubre c√≥mo estamos transformando vidas a trav√©s de educaci√≥n, empleo y desarrollo social
      </p>
    </div>
    
    <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8">
      <a href="/programas#educacion" class="program-card group relative block rounded-2xl border-2 border-blue-100 p-7 hover:border-blue-300 transition-all duration-300 bg-gradient-to-br from-white to-blue-50/30 overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-blue-200 rounded-full opacity-10 -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"></div>
        <div class="relative z-10">
          <div class="text-5xl mb-4 transform group-hover:scale-110 group-hover:rotate-12 transition-transform duration-300">üéì</div>
          <h3 class="font-bold text-xl mb-3 text-blue-900">Educaci√≥n y Becas</h3>
          <p class="text-sm text-slate-600 leading-relaxed mb-4">
            Acceso a formaci√≥n t√©cnica y superior con acompa√±amiento integral y apoyo econ√≥mico.
          </p>
          <span class="inline-flex items-center gap-2 text-blue-700 font-semibold text-sm group-hover:gap-3 transition-all">
            Ver m√°s 
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </span>
        </div>
      </a>

      <a href="/programas#empleo" class="program-card group relative block rounded-2xl border-2 border-purple-100 p-7 hover:border-purple-300 transition-all duration-300 bg-gradient-to-br from-white to-purple-50/30 overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-purple-200 rounded-full opacity-10 -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"></div>
        <div class="relative z-10">
          <div class="text-5xl mb-4 transform group-hover:scale-110 group-hover:rotate-12 transition-transform duration-300">üíº</div>
          <h3 class="font-bold text-xl mb-3 text-purple-900">Empleabilidad</h3>
          <p class="text-sm text-slate-600 leading-relaxed mb-4">
            Formaci√≥n para el trabajo, alianzas estrat√©gicas con empresas y programas de mentor√≠as.
          </p>
          <span class="inline-flex items-center gap-2 text-purple-700 font-semibold text-sm group-hover:gap-3 transition-all">
            Ver m√°s 
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </span>
        </div>
      </a>

      <a href="/programas#social" class="program-card group relative block rounded-2xl border-2 border-pink-100 p-7 hover:border-pink-300 transition-all duration-300 bg-gradient-to-br from-white to-pink-50/30 overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-pink-200 rounded-full opacity-10 -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"></div>
        <div class="relative z-10">
          <div class="text-5xl mb-4 transform group-hover:scale-110 group-hover:rotate-12 transition-transform duration-300">ü§ù</div>
          <h3 class="font-bold text-xl mb-3 text-pink-900">Acci√≥n Social</h3>
          <p class="text-sm text-slate-600 leading-relaxed mb-4">
            Apoyo psicosocial integral, seguridad alimentaria y fortalecimiento del desarrollo comunitario.
          </p>
          <span class="inline-flex items-center gap-2 text-pink-700 font-semibold text-sm group-hover:gap-3 transition-all">
            Ver m√°s 
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </span>
        </div>
      </a>
    </div>
  </section>

  <!-- Secci√≥n de impacto con video/testimonios -->
  <section class="bg-gradient-to-br from-slate-900 to-slate-800 text-white py-16 md:py-20">
    <div class="mx-auto max-w-6xl px-6 md:px-8 lg:px-4">
      <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-center">
        <div>
          <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-6">
            Nuestro impacto en la comunidad
          </h2>
          <p class="text-slate-300 leading-relaxed mb-6">
            Cada d√≠a trabajamos para crear oportunidades reales de crecimiento y desarrollo. Nuestros programas han transformado la vida de cientos de familias en Colombia.
          </p>
          <div class="space-y-4">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-2xl">
                ‚úì
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-1">Educaci√≥n de calidad</h3>
                <p class="text-slate-400 text-sm">Acceso a formaci√≥n t√©cnica y universitaria</p>
              </div>
            </div>
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center text-2xl">
                ‚úì
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-1">Oportunidades laborales</h3>
                <p class="text-slate-400 text-sm">Conexi√≥n directa con empresas y empleadores</p>
              </div>
            </div>
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 w-12 h-12 bg-pink-600 rounded-full flex items-center justify-center text-2xl">
                ‚úì
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-1">Acompa√±amiento integral</h3>
                <p class="text-slate-400 text-sm">Apoyo psicosocial y seguimiento personalizado</p>
              </div>
            </div>
          </div>
          <a href="/nosotros" class="mt-8 inline-flex items-center gap-2 bg-white text-slate-900 px-6 py-3 rounded-lg font-semibold hover:bg-slate-100 transition-colors">
            Conoce m√°s sobre nosotros
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
            </svg>
          </a>
        </div>
        <div class="relative">
          <div class="aspect-video bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl shadow-2xl flex items-center justify-center text-6xl">
            üìπ
          </div>
          <div class="absolute -bottom-6 -right-6 bg-amber-400 text-black px-6 py-3 rounded-lg shadow-lg font-bold">
            +500 vidas transformadas
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- √öltimas noticias -->
  <section class="mx-auto max-w-6xl px-6 md:px-8 lg:px-4 py-16">
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8">
      <div>
        <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-800 to-purple-700 bg-clip-text text-transparent">
          √öltimas noticias
        </h2>
        <p class="mt-2 text-sm sm:text-base text-slate-600">Mantente al d√≠a con nuestras actividades</p>
      </div>
      <a href="/noticias" class="hidden md:inline-flex items-center gap-2 text-blue-700 font-semibold hover:gap-3 transition-all">
        Ver todas
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
        </svg>
      </a>
    </div>
    <div id="noticias-preview" class="grid sm:grid-cols-2 md:grid-cols-3 gap-6">
      <div class="text-center py-12 col-span-full">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-800"></div>
        <p class="mt-4 text-slate-600">Cargando noticias...</p>
      </div>
    </div>
  </section>

  <!-- Call to action final -->
  <section class="mx-auto max-w-6xl px-6 md:px-8 lg:px-4 py-16">
    <div class="bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 rounded-2xl md:rounded-3xl p-8 sm:p-10 md:p-12 text-center text-white relative overflow-hidden">
      <div class="absolute inset-0 opacity-20">
        <div class="absolute top-0 left-1/4 w-64 h-64 bg-white rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 right-1/4 w-64 h-64 bg-white rounded-full blur-3xl"></div>
      </div>
      <div class="relative z-10">
        <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-4">
          ¬øListo para ser parte del cambio?
        </h2>
        <p class="text-base sm:text-lg mb-8 max-w-2xl mx-auto opacity-90">
          Tu apoyo puede transformar vidas. √önete a nuestra misi√≥n de crear oportunidades reales de progreso.
        </p>
        <div class="flex flex-col sm:flex-row flex-wrap gap-4 justify-center">
          <a href="/donar" class="bg-white text-blue-900 px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all text-sm sm:text-base">
            üíõ Hacer una donaci√≥n
          </a>
          <a href="/contacto" class="bg-white/20 backdrop-blur-sm text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-bold border-2 border-white hover:bg-white/30 transition-all text-sm sm:text-base">
            Cont√°ctanos
          </a>
        </div>
      </div>
    </div>
  </section>

  <style>
    @keyframes blob {
      0%, 100% { transform: translate(0px, 0px) scale(1); }
      33% { transform: translate(30px, -50px) scale(1.1); }
      66% { transform: translate(-20px, 20px) scale(0.9); }
    }

    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-blob {
      animation: blob 7s infinite;
    }

    .animation-delay-2000 {
      animation-delay: 2s;
    }

    .animation-delay-4000 {
      animation-delay: 4s;
    }

    .animate-fade-in-up {
      animation: fade-in-up 0.8s ease-out backwards;
    }

    .animation-delay-200 {
      animation-delay: 0.2s;
    }

    .animation-delay-400 {
      animation-delay: 0.4s;
    }

    .animation-delay-600 {
      animation-delay: 0.6s;
    }

    .animation-delay-800 {
      animation-delay: 0.8s;
    }

    .program-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .program-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
  </style>

  <script>
    import { getNoticias } from '../lib/auth.ts';
    import type { Noticia } from '../lib/auth.ts';

    // Contador animado
    function animateCounter(element: HTMLElement) {
      const target = parseInt(element.getAttribute('data-target') || '0');
      const duration = 2000;
      const step = target / (duration / 16);
      let current = 0;

      const timer = setInterval(() => {
        current += step;
        if (current >= target) {
          element.textContent = target.toString();
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(current).toString();
        }
      }, 16);
    }

    // Iniciar contadores cuando sean visibles
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const counters = document.querySelectorAll('.counter');
          counters.forEach(counter => animateCounter(counter as HTMLElement));
          observer.disconnect();
        }
      });
    });

    const statsSection = document.querySelector('.counter');
    if (statsSection) {
      observer.observe(statsSection);
    }

    // Cargar √∫ltimas 3 noticias
    async function loadLatestNews() {
      try {
        const noticias = await getNoticias();
        const container = document.getElementById('noticias-preview');
        
        if (!container) return;
        
        const latest = noticias.slice(0, 3);
        
        if (latest.length === 0) {
          container.innerHTML = '<p class="text-slate-600 col-span-full text-center py-12">No hay noticias disponibles.</p>';
          return;
        }

        container.innerHTML = latest.map((noticia: Noticia) => `
          <article class="bg-white border-2 border-slate-100 rounded-xl p-6 hover:border-blue-200 hover:shadow-lg transition-all duration-300 group">
            <div class="text-xs text-slate-500 mb-2">
              ${new Date(noticia.fecha).toLocaleDateString('es-CO', { year: 'numeric', month: 'long', day: 'numeric' })}
            </div>
            <h3 class="font-bold text-lg mb-2 capitalize group-hover:text-blue-700 transition-colors">
              ${noticia.titulo}
            </h3>
            <p class="text-slate-600 text-sm mb-4 line-clamp-2">
              ${noticia.contenido}
            </p>
            <a href="/noticias" class="inline-flex items-center gap-2 text-blue-700 font-semibold text-sm group-hover:gap-3 transition-all">
              Leer m√°s
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </a>
          </article>
        `).join('');
      } catch (error) {
        const container = document.getElementById('noticias-preview');
        if (container) {
          container.innerHTML = '<p class="text-slate-600 col-span-full text-center py-12">Error al cargar noticias.</p>';
        }
      }
    }

    // Cargar noticias al cargar la p√°gina
    loadLatestNews();
  </script>
</Layout>
